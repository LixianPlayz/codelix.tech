<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Tutorials</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <nav>
      <a href="index.html">Home</a>
      <a href="tutorials.html">Tutorials</a>
      <a href="tools.html">Tools</a>
    </nav>
  </header>

  <main>
    <section aria-labelledby="tutorial-nav">
      <h1 id="tutorial-nav">Tutorials</h1>
      <nav style="display:flex;gap:10px;margin-top:10px;">
        <a href="#python">Python</a>
        <a href="#luau">LuaU</a>
      </nav>
    </section>

    <section id="python" aria-labelledby="pytitle">
      <h2 id="pytitle">Python Coding Tutorials</h2>
      <div class="accordion" id="py-accordion">

        <!-- Snippet 1 -->
        <article class="ac-item">
          <div class="ac-header" data-target="py-1">
            <div class="ac-title">Printing Text</div>
            <button class="ac-toggle" aria-expanded="false">+</button>
          </div>
          <div id="py-1" class="ac-content" aria-hidden="true">
            <pre data-lang="python">print("Hello, world!")</pre>
            <div class="copy-row"><button class="copy-btn">Copy</button></div>
            <p class="small">Print sends text to the console. Great for quick tests and learning output behavior.</p>
          </div>
        </article>

        <!-- Snippet 2 -->
        <article class="ac-item">
          <div class="ac-header" data-target="py-2">
            <div class="ac-title">Loops</div>
            <button class="ac-toggle" aria-expanded="false">+</button>
          </div>
          <div id="py-2" class="ac-content" aria-hidden="true">
            <pre data-lang="python">for i in range(5):
    print("Number:", i)</pre>
            <div class="copy-row"><button class="copy-btn">Copy</button></div>
            <p class="small">Loops run repeated tasks. This prints numbers 0 through 4.</p>
          </div>
        </article>

        <!-- Snippet 3 -->
        <article class="ac-item">
          <div class="ac-header" data-target="py-3">
            <div class="ac-title">Functions</div>
            <button class="ac-toggle" aria-expanded="false">+</button>
          </div>
          <div id="py-3" class="ac-content" aria-hidden="true">
            <pre data-lang="python">def greet(name):
    print("Hello, " + name + "!")

greet("Dex")</pre>
            <div class="copy-row"><button class="copy-btn">Copy</button></div>
            <p class="small">Functions package reusable behavior. Call them with parameters to vary their output.</p>
          </div>
        </article>
      </div>
    </section>

    <section id="luau" aria-labelledby="luautitle">
      <h2 id="luautitle">LuaU Coding Tutorials</h2>
      <div class="accordion" id="lua-accordion">

        <!-- LuaU 1 -->
        <article class="ac-item">
          <div class="ac-header" data-target="lua-1">
            <div class="ac-title">Printing a Message</div>
            <button class="ac-toggle" aria-expanded="false">+</button>
          </div>
          <div id="lua-1" class="ac-content" aria-hidden="true">
            <pre data-lang="lua">print("Hello, Roblox!")</pre>
            <div class="copy-row"><button class="copy-btn">Copy</button></div>
            <p class="small">Use print to test scripts in the Roblox output console.</p>
          </div>
        </article>

        <!-- LuaU 2 -->
        <article class="ac-item">
          <div class="ac-header" data-target="lua-2">
            <div class="ac-title">Moving a Part</div>
            <button class="ac-toggle" aria-expanded="false">+</button>
          </div>
          <div id="lua-2" class="ac-content" aria-hidden="true">
            <pre data-lang="lua">local part = game.Workspace.Part
part.Position = Vector3.new(0, 10, 0)</pre>
            <div class="copy-row"><button class="copy-btn">Copy</button></div>
            <p class="small">Change a Part's Position to move it in the world (server or local depending on script).</p>
          </div>
        </article>

        <!-- LuaU 3 -->
        <article class="ac-item">
          <div class="ac-header" data-target="lua-3">
            <div class="ac-title">Connecting a Function</div>
            <button class="ac-toggle" aria-expanded="false">+</button>
          </div>
          <div id="lua-3" class="ac-content" aria-hidden="true">
            <pre data-lang="lua">local part = game.Workspace.Part
part.Touched:Connect(function(hit)
    print(hit.Name .. " touched the part!")
end)</pre>
            <div class="copy-row"><button class="copy-btn">Copy</button></div>
            <p class="small">Connect functions to events like Touched so code runs when something happens.</p>
          </div>
        </article>

      </div>
    </section>

    <p style="margin-top:16px"><a href="index.html">← Back to Home</a></p>
  </main>

  <footer>© 2025 dex</footer>

  <script>
  /* Accordion + copy + local syntax highlight (basic) */

  // escape HTML - used before injecting highlighted code
  function escapeHtml(s){
    return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
  }

  // very small keyword highlighter for python and lua
  function highlightText(code, lang){
    code = escapeHtml(code);
    if(lang === 'python'){
      // comments
      code = code.replace(/#(.*)$/gm, '<span class="token comment">#$1</span>');
      // strings
      code = code.replace(/(\"\"\"[\s\S]*?\"\"\"|\'\'\'[\s\S]*?\'\'\'|"(?:\\.|[^"])*"|'(?:\\.|[^'])*')/g, '<span class="token string">$1</span>');
      // numbers
      code = code.replace(/\b(\d+(\.\d+)?)\b/g, '<span class="token number">$1</span>');
      // keywords (small list)
      const kw = ['def','for','in','range','print','return','if','else','elif','while','break','continue','import','from','as','class','with','try','except','True','False','None','and','or','not','pass','global','lambda'];
      const re = new RegExp('\\b(' + kw.join('|') + ')\\b','g');
      code = code.replace(re, '<span class="token keyword">$1</span>');
      // function names (simple)
      code = code.replace(/(\b[a-zA-Z_][a-zA-Z0-9_]*)(?=\s*\()/g, '<span class="token func">$1</span>');
    } else if(lang === 'lua'){
      // comments -- single line and multiline
      code = code.replace(/--\[\[[\s\S]*?\]\]--?/g, function(m){ return '<span class="token comment">'+escapeHtml(m)+'</span>'; });
      code = code.replace(/--(.*)$/gm, '<span class="token comment">--$1</span>');
      // strings
      code = code.replace(/(\"(?:\\.|[^"])*\"|'(?:\\.|[^'])*')/g, '<span class="token string">$1</span>');
      // numbers
      code = code.replace(/\b(\d+(\.\d+)?)\b/g, '<span class="token number">$1</span>');
      // keywords
      const kw = ['local','function','end','if','then','else','elseif','for','in','do','while','repeat','until','return','nil','true','false','and','or','not'];
      const re = new RegExp('\\b(' + kw.join('|') + ')\\b','g');
      code = code.replace(re, '<span class="token keyword">$1</span>');
      // simple function name highlight
      code = code.replace(/(\b[a-zA-Z_][a-zA-Z0-9_]*)(?=\s*=?\s*function|\s*\()/g, '<span class="token func">$1</span>');
    }
    return code;
  }

  // apply highlight to all pre[data-lang]
  document.querySelectorAll('pre[data-lang]').forEach(pre=>{
    const lang = pre.getAttribute('data-lang') || '';
    const raw = pre.textContent;
    pre.innerHTML = highlightText(raw, lang);
  });

  // Accordion toggle
  document.querySelectorAll('.ac-header').forEach(header=>{
    header.addEventListener('click', ()=>{
      const targetId = header.dataset.target;
      const content = document.getElementById(targetId);
      const toggleBtn = header.querySelector('.ac-toggle');
      const isOpen = content.classList.contains('open');
      // close any other within same accordion (optional single-open behavior)
      const parent = header.closest('.accordion');
      if(parent){
        parent.querySelectorAll('.ac-content.open').forEach(c=>{
          if(c.id !== targetId){ c.classList.remove('open'); c.style.maxHeight = null; c.previousElementSibling && c.previousElementSibling.querySelector('.ac-toggle').setAttribute('aria-expanded','false'); c.setAttribute('aria-hidden','true'); }
        });
      }
      if(!isOpen){
        content.classList.add('open');
        content.style.maxHeight = content.scrollHeight + 'px';
        toggleBtn.textContent = '−';
        toggleBtn.setAttribute('aria-expanded','true');
        content.setAttribute('aria-hidden','false');
      } else {
        content.classList.remove('open');
        content.style.maxHeight = null;
        toggleBtn.textContent = '+';
        toggleBtn.setAttribute('aria-expanded','false');
        content.setAttribute('aria-hidden','true');
      }
    });
  });

  // copy button behavior
  document.querySelectorAll('.copy-row .copy-btn').forEach(btn=>{
    btn.addEventListener('click', async (e)=>{
      const pre = btn.closest('.ac-content').querySelector('pre');
      const text = pre.textContent;
      try{
        await navigator.clipboard.writeText(text);
        btn.classList.add('copied');
        btn.textContent = 'Copied';
        setTimeout(()=>{ btn.classList.remove('copied'); btn.textContent='Copy'; }, 1400);
      }catch(err){
        // fallback
        const ta = document.createElement('textarea');
        ta.value = text; document.body.appendChild(ta); ta.select();
        try{ document.execCommand('copy'); btn.textContent='Copied'; setTimeout(()=>{btn.textContent='Copy'},1400); }catch(e){ alert('Copy failed') }
        ta.remove();
      }
    });
  });

  // Ensure any content opened by default (none) has proper size on load/resizes
  window.addEventListener('resize', ()=> {
    document.querySelectorAll('.ac-content.open').forEach(c => c.style.maxHeight = c.scrollHeight + 'px');
  });
  </script>
</body>
</html>
